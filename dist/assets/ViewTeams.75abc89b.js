import{A as E,r as u,o as l,c as i,a as e,x as B,h as b,F as w,g as M,b as y,i as z,y as A,z as D,t as _,e as L,B as O,C as R,D as F,p as G,d as K,E as q}from"./index.fc24babe.js";import{v as P}from"./validateName.6ce7ed4b.js";import{v as W}from"./validateEmail.db033d63.js";import{a as I,_ as T}from"./BaseAlert.aa8ad542.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import{T as J,_ as Q}from"./BaseHeading.7358d9eb.js";import"./logo.5b10267d.js";const X="/api/all-roles",Y="/api/admin/invite",Z="/api/invite/invited-users",j="/api/invite/resend",ee="/api/invite/revoke/",te="/api/admin/all-users",se="/api/admin/delete-user",ae="/api/admin/update-status";var x={ALL_ROLES_URL:X,INVITE_MEMBER_URL:Y,INVITED_MEMBERS_LIST_URL:Z,REINVITE_URL:j,REINVOKE_URL:ee,REGISTER_USER_LIST_URL:te,DELETE_USER_URL:se,ENABLE_USER_URL:ae};const V=async()=>await E.get(x.ALL_ROLES_URL),oe=async(r,a)=>await E.post(x.INVITE_MEMBER_URL,r,{headers:{Authorization:a}}),ne=async r=>await E.get(x.INVITED_MEMBERS_LIST_URL,{headers:{Authorization:r}}),le=async(r,a)=>await E.post(x.REINVITE_URL,a,{headers:{Authorization:r}}),re=async(r,a)=>await E.get(x.REINVOKE_URL+a,{headers:{Authorization:r}}),ie=async r=>await E.get(x.REGISTER_USER_LIST_URL,{headers:{Authorization:r}}),ce=async(r,a)=>await E.post(`${x.DELETE_USER_URL}/${a}`,{},{headers:{Authorization:r}}),ue=async(r,a)=>await E.post(`${x.ENABLE_USER_URL}/${a}`,{},{headers:{Authorization:r}});const de=e("button",{type:"button",class:"btn btn-sm btn-primary text-white","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add New Member ",-1),_e={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ve={class:"modal-dialog"},he={class:"modal-content"},me=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Add New Member"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pe={class:"modal-body"},be={key:1},ge=["onSubmit"],fe={class:"mt-4"},ye=e("label",{for:"roles"},[L("Roles "),e("span",{class:"text-danger"},"*")],-1),we=["value","textContent"],Ee=["textContent"],xe=e("div",{class:"mt-4 mb-2"},[e("button",{type:"submit",class:"btn btn-primary text-white"}," Send Invite ")],-1),$e={setup(r){const a=u(""),c=u(""),m=u(""),h=u(""),v=u(""),g=u(""),f=u(!1),$=u([]),p=u([]);async function C(){try{const n=await V();$.value=n.data.roles}catch{p.value.push("Something went wrong, please try again later.")}}C();async function d(){h.value="",v.value="",g.value="",p.value=[],f.value=!1;const{isValid:n,errorMessage:t}=P(a.value),{isValid:s,errorMessage:o}=W(c.value);if(n||(h.value=t,a.value=""),s||(v.value=o,c.value=""),h.value===""&&v.value===""&&p.value.length===0)try{const{user:{id:U}}=O(),S={name:a.value,email:c.value,role_id:m.value,user_id:U},N=R();(await oe(S,N)).status===200&&(f.value=!0,setTimeout(()=>{f.value=!1},3e3),location.reload(),a.value="",c.value="",m.value="")}catch{p.value.push("Something went wrong, please try again later.")}}return(n,t)=>(l(),i(w,null,[de,e("div",_e,[e("div",ve,[e("div",he,[me,e("div",pe,[f.value?(l(),B(I,{key:0,message:"Invite send successfully!","hex-font-color":"198754"})):b("",!0),p.value.length?(l(),i("div",be,[(l(!0),i(w,null,M(p.value,s=>(l(),i("div",{key:s},[y(I,{message:s,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):b("",!0),e("form",{onSubmit:z(d,["prevent"])},[y(T,{type:"text",name:"name",label:"Full name",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),error:h.value},null,8,["modelValue","error"]),y(T,{type:"email",name:"email",label:"Email address",modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),error:v.value},null,8,["modelValue","error"]),e("div",fe,[ye,$.value.length?A((l(),i("select",{key:0,class:"form-select mt-2","aria-label":"roles select menu","onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),required:""},[(l(!0),i(w,null,M($.value,s=>(l(),i("option",{key:s.id,value:s.id,textContent:_(`${s.role.toUpperCase()}`)},null,8,we))),128))],512)),[[D,m.value]]):b("",!0),g.value?(l(),i("div",{key:1,class:"form-text text-danger",textContent:_(g.value)},null,8,Ee)):b("",!0)]),xe],40,ge)])])])])],64))}},Ce={class:"mt-2 fs-5"},Re=L(" Invited Members "),Le=["textContent"],ke={key:0,class:"alert alert-success alert-dismissible fade show mt-2",role:"alert"},Ue=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Me={class:"mt-3 border border-bottom-0 rounded"},Se={class:"table table-hover"},Ie=e("thead",{class:"text-primary"},[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Role"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Action"),e("th",{scope:"col"})])],-1),Te={key:0},Ae={key:1},Ve=["textContent"],Ne=["textContent"],Be=["textContent"],ze=["textContent"],De=["textContent"],Oe=["onClick"],Fe=e("button",{class:"btn btn-light dropdown-toggle btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"true"},null,-1),Ge={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Ke=["onClick"],qe={setup(r){const a=u(0),c=u([]),m=u(!0),h=u([]),v=u(""),g=d=>d===!1?"Wait":"Active",f=d=>{let n="";return h.value.length>0?(h.value.forEach(t=>{t.id===d&&(n=t.role.toUpperCase())}),n):d};async function $(d){v.value="";try{const n=R(),t=await le(n,{email:d});t.status==200&&C(),v.value=t.data.message}catch(n){console.log(n)}}async function p(d){v.value="";try{const n=R(),t=await re(n,d);v.value=t.data.message,t.status==200&&C()}catch(n){console.log(n)}}async function C(){try{const d=R(),n=await ne(d),t=await V();c.value=n.data.invitedUsers,a.value=n.data.total,h.value=t.data.roles,m.value=!1}catch(d){console.log(d)}}return C(),(d,n)=>(l(),i(w,null,[e("div",Ce,[Re,a.value?(l(),i("span",{key:0,textContent:_(`(${a.value})`)},null,8,Le)):b("",!0)]),v.value?(l(),i("div",ke,[L(_(v.value)+" ",1),Ue])):b("",!0),y($e),e("div",Me,[e("table",Se,[Ie,m.value?(l(),i("p",Te,"Loading...")):b("",!0),c.value.length?(l(),i("tbody",Ae,[(l(!0),i(w,null,M(c.value,(t,s)=>(l(),i("tr",{key:t.id},[e("th",{scope:"row",textContent:_(`${s+1}`)},null,8,Ve),e("td",{textContent:_(t.name)},null,8,Ne),e("td",{class:"gray-color",textContent:_(t.email)},null,8,Be),e("td",{textContent:_(f(t.role_id))},null,8,ze),e("td",{class:"gray-color",textContent:_(g(t.inviteAccepted))},null,8,De),e("td",null,[e("button",{class:"btn btn-light btn-sm",onClick:o=>$(t.email)}," Reinvite ",8,Oe)]),e("td",null,[Fe,e("ul",Ge,[e("li",null,[e("a",{class:"dropdown-item",onClick:o=>p(t.id)}," Revoke ",8,Ke)])])])]))),128))])):b("",!0)])])],64))}};const k=r=>(G("data-v-4049401c"),r=r(),K(),r),Pe={class:"mt-5 fs-5"},We=L(" All Members "),He=["textContent"],Je={class:"mt-3 border border-bottom-0 rounded"},Qe={class:"topnav"},Xe={class:"table table-hover"},Ye={class:"text-primary"},Ze=k(()=>e("th",{scope:"col"},"#",-1)),je=L(" Name "),et=k(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[e("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1)),tt=[je,et],st=L(" Email "),at=k(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[e("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1)),ot=[st,at],nt=k(()=>e("th",{scope:"col"},"Status",-1)),lt=k(()=>e("th",{scope:"col"},"Action",-1)),rt={key:0},it=["textContent"],ct=["textContent"],ut=["textContent"],dt=["onClick","textContent"],_t={class:"dropdown"},vt=k(()=>e("button",{class:"btn btn-light dropdown-toggle btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"true"},null,-1)),ht={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},mt=["onClick"],pt={setup(r){const a=u(0),c=u([]),m=u(c.value),h=u(!0),v=u(!0);async function g(){try{const t=R(),s=await ie(t);c.value=s.data.users,a.value=s.data.total,h.value=!1}catch{alert("Something went wrong, please try again later")}}async function f(t){try{const s=R(),o=await ce(s,c.value[t].id);h.value=!1,o.status==200&&(g(),alert(o.data.message))}catch{alert("Something went wrong, please try again later")}}async function $(t){try{const s=R(),o=await ue(s,c.value[t].id);h.value=!1,o.status==200&&(g(),alert(o.data.message))}catch{alert("Something went wrong, please try again later.")}}function p(t){return t=="1"?"Disable":"Enable"}function C(t){m.value.splice(0,c.value.length),c.value.forEach(s=>{s.name.includes(t)&&m.value.push(s),v.value=!1})}function d(t){return function(s,o){return s[t].toLowerCase()>o[t].toLowerCase()?1:s[t].toLowerCase()<o[t].toLowerCase()?-1:0}}function n(t){c.value.sort(d(t))}return g(),(t,s)=>(l(),i(w,null,[e("div",Pe,[We,a.value?(l(),i("span",{key:0,textContent:_(`(${a.value})`)},null,8,He)):b("",!0)]),e("div",Je,[e("div",Qe,[A(e("input",{type:"text",placeholder:"Search..","onUpdate:modelValue":s[0]||(s[0]=o=>t.value=o),onInput:s[1]||(s[1]=o=>C(t.value))},null,544),[[F,t.value]])]),e("table",Xe,[e("thead",Ye,[e("tr",null,[Ze,e("th",{onClick:s[2]||(s[2]=o=>n("name")),scope:"col"},tt),e("th",{onClick:s[3]||(s[3]=o=>n("email")),scope:"col"},ot),nt,lt])]),h.value?(l(),i("p",rt,"Loading...")):b("",!0),e("tbody",null,[(l(!0),i(w,null,M(v.value?c.value:m.value,(o,U)=>(l(),i("tr",{key:o.id},[e("th",{scope:"row",textContent:_(o.id)},null,8,it),e("td",{textContent:_(o.name)},null,8,ct),e("td",{textContent:_(o.email)},null,8,ut),e("td",null,_(p(o.activeStatus)==="Enable"?"Disable":"Enable"),1),e("td",null,[e("button",{class:"btn btn-light btn-sm",onClick:S=>$(U),textContent:_(p(o.activeStatus))},null,8,dt)]),e("td",_t,[vt,e("ul",ht,[e("li",null,[e("a",{class:"dropdown-item",onClick:S=>f(U)}," Delete",8,mt)])])])]))),128))])])])],64))}};var bt=H(pt,[["__scopeId","data-v-4049401c"]]);const gt={class:"teams__container"},Lt={setup(r){const a=q();return a.userStatus=!1,(c,m)=>(l(),i(w,null,[y(J),e("main",null,[y(Q,{title:"Teams"}),e("div",gt,[y(qe),y(bt)])])],64))}};export{Lt as default};
