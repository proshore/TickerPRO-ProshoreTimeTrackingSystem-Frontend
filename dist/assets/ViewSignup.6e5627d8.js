import{r as l,f as B,m as R,o as i,c as u,a as r,u as k,b as o,w as h,h as V,F as C,g as F,i as $,e as t,k as q,s as A}from"./index.55e7d9ad.js";import{_,a as D}from"./BaseAlert.a549810a.js";import{_ as j}from"./BaseFormHeading.f83abb38.js";import{v as z}from"./validateEmail.db033d63.js";import{v as G}from"./validatePassword.7ebb3638.js";import{v as H}from"./validateName.6ce7ed4b.js";import{l as I}from"./logo.c54c54d3.js";function J(y,d){return d?y!==d?{isValid:!1,errorMessage:"Password did not match"}:{isValid:!0,errorMessage:""}:{isValid:!1,errorMessage:"Confirm Password is required."}}const K=["src"],O={class:"d-grid col-md-8 col-lg-5 mx-auto"},Q={key:0,class:"alert alert-success",role:"alert"},W=t(" Signup successfully! "),X=t("Login"),Y=t(" to start using Ticker. "),Z={key:1,class:"alert alert-success",role:"alert"},ee=t(" Password reset successfully! "),ae=t("Login"),se=t(" to start using Ticker. "),oe={key:2},re=["onSubmit"],le={class:"mb-3"},te={class:"d-grid"},ne=["disabled"],ie={class:"mt-4"},ue=t(" Already have an account? "),de=r("u",null,"Login",-1),ge={setup(y){const d=q(),b=d.params.token,P=d.query.email,e=l({name:"",email:P,password:"",passwordConfirmation:""}),c=l(""),v=l(""),p=l(""),f=l(""),n=l([]),w=l(!1),S=B(()=>e.value.name===""||e.value.email===""||e.value.password===""||e.value.passwordConfirmation==="");async function x(){n.value=[],c.value="",v.value="",p.value="",f.value="",w.value=!1;const{isValid:g,errorMessage:s}=H(e.value.name),{isValid:m,errorMessage:a}=z(e.value.email),{isValid:E,errorMessage:M}=G(e.value.password),{isValid:N,errorMessage:L}=J(e.value.password,e.value.passwordConfirmation);if(g||(c.value=s,e.value.name=""),m||(v.value=a,e.value.email=""),E||(p.value=M,e.value.password=""),N||(f.value=L,e.value.passwordConfirmation=""),n.value.length===0&&!c.value&&!p.value&&!v.value&&!f.value){const T={name:e.value.name,email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:b};try{await A(T),w.value=!0,e.value.name="",e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch(U){U.response.status===401?(n.value.push("Please enter an valid email."),e.value.email=""):(n.value.push("Something went wrong, please try again later."),e.value.password="",e.value.passwordConfirmation="")}}}return(g,s)=>{const m=R("RouterLink");return i(),u(C,null,[r("img",{src:k(I),alt:"Ticker logo",class:"logo"},null,8,K),r("div",O,[o(j,{title:"Sign up",shortDesc:"Start using Ticker for free."}),w.value?(i(),u("div",Q,[W,o(m,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:h(()=>[X]),_:1}),Y])):V("",!0),g.passwordResetSuccess?(i(),u("div",Z,[ee,o(m,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:h(()=>[ae]),_:1}),se])):V("",!0),n.value.length?(i(),u("div",oe,[(i(!0),u(C,null,F(n.value,a=>(i(),u("div",{key:a},[o(D,{message:a,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):V("",!0),r("form",{onSubmit:$(x,["prevent"])},[r("div",le,[o(_,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.name=a),error:c.value},null,8,["modelValue","error"]),o(_,{type:"email",name:"email",label:"Email address",modelValue:e.value.email,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.email=a),error:v.value},null,8,["modelValue","error"]),o(_,{type:"password",name:"password",label:"Password",modelValue:e.value.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.password=a),error:p.value},null,8,["modelValue","error"]),o(_,{type:"password",name:"confirm-password",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.passwordConfirmation=a),error:f.value},null,8,["modelValue","error"])]),r("div",te,[r("button",{type:"submit",class:"btn btn-primary text-white",disabled:k(S)}," Sign up ",8,ne)]),r("p",ie,[ue,o(m,{to:{name:"login"},class:"text-secondary fw-normal"},{default:h(()=>[de]),_:1})])],40,re)])],64)}}};export{ge as default};
